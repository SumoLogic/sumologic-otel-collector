receivers:
  # Generate sample log data
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318

processors:
  # DNS lookup processor with caching
  lookup:
    source:
      type: dns
      mode: forward
      timeout: 5s
    cache:
      enabled: true
      size: 1000
      ttl: 5m
      negative_ttl: 1m
    attributes:
      - key: server.ip
        from_attribute: server.hostname
        default: "unknown"
        action: upsert
        context: record

  # Batch processor for efficiency
  batch:
    timeout: 1s
    send_batch_size: 100

exporters:
  # Debug exporter to see the results
  debug:
    verbosity: detailed
    sampling_initial: 5
    sampling_thereafter: 1

service:
  pipelines:
    logs:
      receivers: [otlp]
      processors: [lookup, batch]
      exporters: [debug]
